<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Home</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="",baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body class="dark" data-theme="dark"><div class="sidebar-container"><div class="sidebar" id="sidebar"><a href="/" class="sidebar-title sidebar-title-anchor">Home</a><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="2ON8ikQMylqMPb1Uyrg7F"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-cocoda-sdk.html">cocoda-sdk</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="jZE9WK--B7S9Znro2kwqz"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="BackendError.html">BackendError</a></div><div class="sidebar-section-children"><a href="BackendUnavailableError.html">BackendUnavailableError</a></div><div class="sidebar-section-children"><a href="BaseProvider.html">BaseProvider</a></div><div class="sidebar-section-children"><a href="CDKError.html">CDKError</a></div><div class="sidebar-section-children"><a href="CocodaSDK.html">CocodaSDK</a></div><div class="sidebar-section-children"><a href="ConceptApiProvider.html">ConceptApiProvider</a></div><div class="sidebar-section-children"><a href="InvalidOrMissingParameterError.html">InvalidOrMissingParameterError</a></div><div class="sidebar-section-children"><a href="InvalidProviderError.html">InvalidProviderError</a></div><div class="sidebar-section-children"><a href="InvalidRequestError.html">InvalidRequestError</a></div><div class="sidebar-section-children"><a href="LabelSearchSuggestionProvider.html">LabelSearchSuggestionProvider</a></div><div class="sidebar-section-children"><a href="LocApiProvider.html">LocApiProvider</a></div><div class="sidebar-section-children"><a href="LocalMappingsProvider.html">LocalMappingsProvider</a></div><div class="sidebar-section-children"><a href="MappingsApiProvider.html">MappingsApiProvider</a></div><div class="sidebar-section-children"><a href="MethodNotImplementedError.html">MethodNotImplementedError</a></div><div class="sidebar-section-children"><a href="MissingApiUrlError.html">MissingApiUrlError</a></div><div class="sidebar-section-children"><a href="MyCoReProvider.html">MyCoReProvider</a></div><div class="sidebar-section-children"><a href="NetworkError.html">NetworkError</a></div><div class="sidebar-section-children"><a href="OccurrencesApiProvider.html">OccurrencesApiProvider</a></div><div class="sidebar-section-children"><a href="ReconciliationApiProvider.html">ReconciliationApiProvider</a></div><div class="sidebar-section-children"><a href="SkohubProvider.html">SkohubProvider</a></div><div class="sidebar-section-children"><a href="SkosmosApiProvider.html">SkosmosApiProvider</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section class="readme"><article><h1 id="cocoda-sdk">Cocoda SDK</h1><p><a href="https://github.com/gbv/cocoda-sdk/actions/workflows/test-and-build.yml"><img src="https://github.com/gbv/cocoda-sdk/actions/workflows/test-and-build.yml/badge.svg" alt="Test and build"></a><a href="https://github.com/gbv/cocoda-sdk"><img src="https://img.shields.io/github/package-json/v/gbv/cocoda-sdk.svg?label=version" alt="GitHub package version"></a><a href="https://www.npmjs.com/package/cocoda-sdk"><img src="https://img.shields.io/badge/npm-cocoda--sdk-blue.svg" alt="NPM package name"></a><a href="https://github.com/RichardLitt/standard-readme"><img src="https://img.shields.io/badge/readme%20style-standard-brightgreen.svg" alt="standard-readme compliant"></a></p><blockquote><p>SDK for <a href="https://github.com/gbv/cocoda">Cocoda</a> and <a href="https://coli-conc.gbv.de/">coli-conc</a> services</p></blockquote><h2 id="table-of-contents">Table of Contents</h2><ul><li><a href="#install">Install</a></li><li><a href="#usage">Usage</a><ul><li><a href="#import">Import</a></li><li><a href="#v1-compatibility">v1 Compatibility</a></li><li><a href="#configuration">Configuration</a></li><li><a href="#registries">Registries</a></li><li><a href="#providers">Providers</a></li><li><a href="#multiple-instances">Multiple Instances</a></li><li><a href="#authenticated-requests">Authenticated Requests</a></li></ul></li><li><a href="#methods">Methods</a><ul><li><a href="#methods-for-cocoda-sdk-instance">Methods for cocoda-sdk instance</a></li><li><a href="#registry-methods---general">Registry Methods - General</a></li><li><a href="#registry-methods---concept-schemes">Registry Methods - Concept Schemes</a></li><li><a href="#registry-methods---concepts">Registry Methods - Concepts</a></li><li><a href="#registry-methods---concordances">Registry Methods - Concordances</a></li><li><a href="#registry-methods---mappings">Registry Methods - Mappings</a></li><li><a href="#registry-methods---annotations">Registry Methods - Annotations</a></li><li><a href="#registry-methods---various">Registry Methods - Various</a></li></ul></li><li><a href="#errors">Errors</a></li><li><a href="#maintainers">Maintainers</a></li><li><a href="#publish">Publish</a></li><li><a href="#contribute">Contribute</a></li><li><a href="#license">License</a></li></ul><h2 id="install">Install</h2><pre class="prettyprint source lang-bash"><code>npm i cocoda-sdk
</code></pre><p>We are also providing a browser bundle: https://cdn.jsdelivr.net/npm/cocoda-sdk@2/dist/cocoda-sdk.js (~51K gzipped, ~155K not gzipped) It will be available under the global name <code>CDK</code> and contain the listed members below (in particular the default instance <code>CDK.cdk</code>).</p><p><a href="https://www.jsdelivr.com/package/npm/cocoda-sdk"><img src="https://data.jsdelivr.com/v1/package/npm/cocoda-sdk/badge?style=rounded" alt=""></a></p><h2 id="usage">Usage</h2><h3 id="import">Import</h3><p>cocoda-sdk exports a default instance, so the same object is used on each import of cocoda-sdk. We recommend using this instance over creating one's own.</p><pre class="prettyprint source lang-js"><code>const { cdk } = require(&quot;cocoda-sdk&quot;) // CommonJS
import { cdk } from &quot;cocoda-sdk&quot; // ESM
</code></pre><p>Since cocoda-sdk is an ES module, we'll use the <code>import</code>/<code>export</code> syntax in the rest of the documentation.</p><p>cocoda-sdk also exports some other members:</p><ul><li><code>CocodaSDK</code> - the class that is behind the default instance</li><li><code>errors</code> - see <a href="#errors">Errors</a></li><li>All individual provider classes - see <a href="#providers">Providers</a><ul><li>Note: You need to append <code>Provider</code> to the names, e.g. <code>LocalMappings</code> is exported as <code>LocalMappingsProvider</code>.</li></ul></li><li><code>addAllProviders</code> - a method that adds all avaiable providers to an instance<ul><li>Can be called without parameters to add to the default instance. Useful if you need all providers.</li></ul></li></ul><h3 id="v1-compatibility">v1 Compatibility</h3><p>cocoda-sdk v2 changed how it is exported and therefore it needs to be included differently.</p><pre class="prettyprint source lang-js"><code>// CommonJS
// Previously: const cdk = require(&quot;cocoda-sdk&quot;)
// Now:
const { cdk } = require(&quot;cocoda-sdk&quot;)
// or: const cdk = require(&quot;cocoda-sdk&quot;).cdk
</code></pre><pre class="prettyprint source lang-js"><code>// ES6
// Previously: import * as cdk from &quot;cocoda-sdk&quot;
// Now:
import { cdk } from &quot;cocoda-sdk&quot;
</code></pre><pre class="prettyprint source lang-js"><code>// Browser
// Previously the default instance was globally available under `cdk`.
// Now the module is available under `CDK` with `cdk` as one of its members. To easily make previous code compatible:
const { cdk } = CDK
</code></pre><h3 id="configuration">Configuration</h3><p>cocoda-sdk can be configured after import:</p><pre class="prettyprint source lang-js"><code>import { cdk } from &quot;cocoda-sdk&quot;
cdk.setConfig(config)
</code></pre><p>The configuration can also be loaded from a URL:</p><pre class="prettyprint source lang-js"><code>import { cdk } from &quot;cocoda-sdk&quot;
await cdk.loadConfig(&quot;https://raw.githubusercontent.com/gbv/cocoda/dev/config/cocoda.default.json&quot;)
</code></pre><p>The configuration is a JSON object corresponding the the <a href="https://github.com/gbv/cocoda#configuration">configuration format of Cocoda</a>. In particular, the configuration contains an array property <a href="#registries"><code>registries</code></a>.</p><p>If you only use cocoda-sdk with a single registry, configuration might not be necessary (see below).</p><h3 id="registries">Registries</h3><p>A registry is an individual source of data, for instance a set of concept schemes available from a specific terminology service. The simplest registry consists only of a unique identifier (<code>uri</code>) and the name of the access provider (<code>provider</code>):</p><pre class="prettyprint source lang-json"><code>{
  &quot;uri&quot;: &quot;http://coli-conc.gbv.de/registry/local-mappings&quot;,
  &quot;provider&quot;: &quot;LocalMappings&quot;
}
</code></pre><p>A list of available providers can be found <a href="#providers">below</a>. Most providers need additional properties to work correctly.</p><h4 id="endpoint-determination">Endpoint Determination</h4><p>For many providers, you need to specify one or more endpoints on the registry object for it to work. There are, however, three steps in which these endpoints are determined:</p><ol><li>By explicitly specifying an endpoint on the registry object.</li><li>By performaning a request to the provider's <code>/status</code> endpoint and parsing its result (which is done in <code>registry.init()</code>).</li><li>By implication using the <code>api</code> base URL.</li></ol><p>Values set earlier in these steps will never be overwritten by later steps. That means to disable an endpoint explicitly, you can set it to <code>null</code> when configuring the registry. Also, if step 2 is successful, it will be assumed that no further endpoints exist and all missing endpoints will be set to <code>null</code>, i.e. essentially skipping step 3.</p><h4 id="using-a-single-registry">Using a Single Registry</h4><p>If you only have a single registry you want to access, you can initialize it as follows:</p><pre class="prettyprint source lang-js"><code>import { cdk, LocalMappingsProvider } from &quot;cocoda-sdk&quot;
// Local mappings are not included by default
cdk.addProvider(LocalMappingsProvider)
const registry = cdk.initializeRegistry({
  uri: &quot;http://coli-conc.gbv.de/registry/local-mappings&quot;,
  provider: &quot;LocalMappings&quot;
})
// Now, access methods are available on the registry:
registry.getMappings()
</code></pre><h4 id="using-registries-from-a-configuration">Using Registries From a Configuration</h4><p>If you initialize cocoda-sdk with a <a href="#configuration">configuration</a>, it will initialize all included registries automatically. Those registries are then accessible via <code>cdk.config.registries</code>. Alternatively, you can retrieve registries by URI:</p><pre class="prettyprint source lang-js"><code>// After setting up cdk
const registry = cdk.getRegistryForUri(&quot;...&quot;)
</code></pre><h3 id="providers">Providers</h3><p>Providers allow access to different types of APIs.</p><p>The following providers are offered in cocoda-sdk by default:</p><ul><li><code>Base</code> - the base provider that all other providers have to inherit from</li><li><code>ConceptApi</code> - access to concept schemes and concepts via <a href="https://github.com/gbv/jskos-server">jskos-server</a></li><li><code>MappingsApi</code> - access to concordances, mappings, and annotations via <a href="https://github.com/gbv/jskos-server">jskos-server</a></li></ul><p>The following providers are also exported, but have to be added via <code>cdk.addProvider</code>:</p><ul><li><code>LocalMappings</code> - access to local mappings via <a href="https://github.com/localForage/localForage">localForage</a> (only available in browser)</li><li><code>SkosmosApi</code> - access to concept schemes and concepts via a <a href="https://github.com/NatLibFi/Skosmos">Skosmos</a> API</li><li><code>LocApi</code> - access to concept schemes and concepts via the <a href="https://id.loc.gov/">Library of Congress Linked Data Service</a><ul><li><strong>This integration is currently experimental and only supports LCSH and LCNAF.</strong></li></ul></li><li><code>Skohub</code> - access to concept schemes and concepts via a <a href="https://blog.lobid.org/2019/09/27/presenting-skohub-vocabs.html">SkoHub Vocabs</a><ul><li><strong>This integration is currently experimental. Only vocabularies that use a <a href="%5Bhash%5D(https://www.w3.org/2001/sw/BestPractices/VM/http-examples/2006-01-18/#slash)">slash namespace pattern</a> with dereferenceable URIs are supported.</strong></li></ul></li><li><code>LobidApi</code> - access to GND via <a href="https://lobid.org">lobid</a><ul><li><strong>This integration is currently experimental.</strong></li></ul></li><li><code>MyCoRe</code> - access to vocabularies via <a href="https://www.mycore.de/">MyCoRe</a><ul><li><strong>This integration is currently experimental. Only one vocabulary per registry is supported. Not recommended for large vocabularies as all of the vocabulary data is loaded and kept in memory.</strong></li></ul></li><li><code>ReconciliationApi</code> - access to mapping suggestions via a <a href="https://github.com/OpenRefine/OpenRefine/wiki/Reconciliation-Service-API">OpenRefine Reconciliation API</a></li><li><code>OccurrencesApi</code> - access to concept occurrences via <a href="https://github.com/gbv/occurrences-api">occurrences-api</a> (will be changed to <a href="https://github.com/gbv/occurrences-server">occurrences-server</a> in the future)</li><li><code>LabelSearchSuggestion</code> - access to mapping suggestions using other registries' search endpoints (using <a href="https://github.com/gbv/jskos-server">jskos-server</a>)</li></ul><p>To add a provider, append <code>Provider</code> to its name and import it together with <code>cdk</code>:</p><pre class="prettyprint source lang-js"><code>import { cdk, LocApiProvider } from &quot;cocoda-sdk&quot;
cdk.addProvider(LocApiProvider)
</code></pre><p>Note that in the browser bundle, all providers listed above are included and do not have to be added separately.</p><p>Please refer to each provider's documentation for how exactly to configure that provider: <a href="https://gbv.github.io/cocoda-sdk/">Documentation</a></p><p>It is also possible to add custom providers that inherit from BaseProvider:</p><pre class="prettyprint source lang-js"><code>import CustomProvider from &quot;./custom-provider.js&quot;
cdk.addProvider(CustomProvider)
</code></pre><p>It is then possible to use that provider via cocoda-sdk as well. (See also: Example under <a href="https://github.com/gbv/cocoda-sdk/blob/master/examples/custom-provider.js"><code>examples/custom-provider.js</code></a>.)</p><h3 id="multiple-instances">Multiple Instances</h3><p>The <code>createInstance</code> method can be used to create a new and independent instance with a separate configuration if needed:</p><pre class="prettyprint source lang-js"><code>const newCdk = cdk.createInstance(config)
</code></pre><h3 id="authenticated-requests">Authenticated Requests</h3><p>The following is a barebones example on how to use cocoda-sdk together with <a href="https://github.com/gbv/login-client"><code>login-client</code></a>.</p><p>Prerequisites:</p><ul><li>A local instance of <a href="https://github.com/gbv/login-server">Login Server</a> running on <code>localhost:3004</code><ul><li>Needs a configured identity provider with at least one user</li><li>The HTTP server that is serving the example below must be configured under <code>ALLOWED_ORIGINS</code></li><li>The user must already be logged in</li></ul></li><li>A local instance of <a href="https://github.com/gbv/jskos-server">JSKOS Server</a> running on <code>localhost:3000</code><ul><li>The Login Server's public key must be configured</li><li>Mappings must be enabled for authenticated users (is given for the default configuration)</li></ul></li></ul><p>See also the code comments inside the example.</p><pre class="prettyprint source lang-html"><code>&lt;!DOCTYPE html>
&lt;html>
&lt;head>
    &lt;meta charset=&quot;utf-8&quot;>
    &lt;title>Test&lt;/title>
&lt;/head>
&lt;body>
&lt;!-- login-client, cocoda-sdk -->
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/gbv-login-client@0&quot;>&lt;/script>
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/cocoda-sdk@2&quot;>&lt;/script>
&lt;script>
// Initialize mapping registry at localhost:3000
const registry = CDK.cdk.initializeRegistry({
  provider: &quot;MappingsApi&quot;,
  uri: &quot;local:mappings&quot;,
  status: &quot;http://localhost:3000/status&quot;,
})
// Note: This is an async function, so we might be dealing with race conditions here.
registry.init()
// Create client to connect to Login Server at localhost:3004
let client = new LoginClient(&quot;localhost:3004&quot;, { ssl: false })
let user
// Add listener for all event types
client.addEventListener(null, event => {
  switch (event.type) {
    case LoginClient.events.connect:
      // At this point, we don't know whether the user has logged in yet, but we can try
      console.log(registry.isAuthorizedFor({ type: &quot;mappings&quot;, action: &quot;create&quot;, user }))
      break
    case LoginClient.events.login:
      // Update user
      user = event.user
      // Now we know the user is logged in, so this should return true
      // Note that if the user is already logged in, this event will fire before connected
      console.log(registry.isAuthorizedFor({ type: &quot;mappings&quot;, action: &quot;create&quot;, user }))
      break
    case LoginClient.events.update:
      // Update user
      user = event.user
      break
    case LoginClient.events.about:
      // Register the server's public key in the registry
      registry.setAuth({ key: event.publicKey })
      break
    case LoginClient.events.token:
      // On every token update, update the token in the registry
      registry.setAuth({ bearerToken: event.token })
      break
  }
})
// Start connection to client
client.connect()
&lt;/script>
&lt;/body>
&lt;/html>
</code></pre><p>Note that for a real application, there are more things necessary:</p><ul><li>Track whether the client is connected and whether the user is logged in</li><li>Tell the user to log in if necessary</li><li>Check if the <code>registry.init()</code> call finished before making requests (might not be necessary because requests will wait for initialization)</li><li>Error handling</li><li>etc.</li></ul><p>You can find more in-depth examples here:</p><ul><li>The <a href="https://github.com/gbv/cocoda/blob/dev/src/store/modules/auth.js">Vuex store module for authentication in Cocoda</a>.<ul><li>Even if you're not using Vue.js, this can be helpful.</li><li>Cocoda is using cocoda-sdk extensively, so other parts of the code might also be helpful. It has gotten pretty big and complex though.</li></ul></li><li>The <a href="https://github.com/gbv/login-server/blob/master/views/api.ejs">API page of Login Server</a>. This is merely an example on how to use <code>login-client</code>.</li></ul><h2 id="methods">Methods</h2><p>A cocoda-sdk instance itself offers only a handful of methods. The actual access to APIs happens through <a href="#registries">registries</a>. The following list of methods assume either an instance of cocoda-sdk (<code>cdk.someMethod</code>) or an initialized registry (<code>registry.someMethod</code>). Documentation for registry methods is on a per-provider basis. While the API should be the same for a particular methods across providers, the details on how to use it might differ.</p><h3 id="methods-for-cocoda-sdk-instance">Methods for cocoda-sdk instance</h3><p>Please refer to the <a href="https://gbv.github.io/cocoda-sdk/CocodaSDK.html">documentation</a>.</p><h3 id="registry-methods---general">Registry Methods - General</h3><h4 id="registry.init"><code>registry.init</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/BaseProvider.html#init">BaseProvider - init</a></li></ul><h4 id="registry.isauthorizedfor"><code>registry.isAuthorizedFor</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/BaseProvider.html#isAuthorizedFor">BaseProvider - isAuthorizedFor</a></li></ul><h4 id="registry.supportsscheme"><code>registry.supportsScheme</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/BaseProvider.html#supportsScheme">BaseProvider - supportsScheme</a></li><li><a href="https://gbv.github.io/cocoda-sdk/LabelSearchSuggestionProvider.html#supportsScheme">LabelSearchSuggestionProvider - supportsScheme</a></li></ul><h4 id="registry.setauth"><code>registry.setAuth</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/BaseProvider.html#setAuth">BaseProvider - setAuth</a></li></ul><h4 id="registry.setretryconfig"><code>registry.setRetryConfig</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/BaseProvider.html#setRetryConfig">BaseProvider - setRetryConfig</a></li></ul><h4 id="registry.getcanceltokensource"><code>registry.getCancelTokenSource</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/BaseProvider.html#getCancelTokenSource">BaseProvider - getCancelTokenSource</a></li></ul><h3 id="registry-methods---concept-schemes">Registry Methods - Concept Schemes</h3><h4 id="registry.getschemes"><code>registry.getSchemes</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/ConceptApiProvider.html#getSchemes">ConceptApiProvider - getSchemes</a></li><li><a href="https://gbv.github.io/cocoda-sdk/SkosmosApiProvider.html#getSchemes">SkosmosApiProvider - getSchemes</a></li></ul><h4 id="registry.vocsearch"><code>registry.vocSearch</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/ConceptApiProvider.html#vocSearch">ConceptApiProvider - vocSearch</a></li></ul><h4 id="registry.vocsuggest"><code>registry.vocSuggest</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/ConceptApiProvider.html#vocSuggest">ConceptApiProvider - vocSuggest</a></li></ul><h3 id="registry-methods---concepts">Registry Methods - Concepts</h3><h4 id="registry.gettop"><code>registry.getTop</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/ConceptApiProvider.html#getTop">ConceptApiProvider - getTop</a></li></ul><h4 id="registry.getconcepts"><code>registry.getConcepts</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/ConceptApiProvider.html#getConcepts">ConceptApiProvider - getConcepts</a></li><li><a href="https://gbv.github.io/cocoda-sdk/SkosmosApiProvider.html#getConcepts">SkosmosApiProvider - getConcepts</a></li></ul><h4 id="registry.getnarrower"><code>registry.getNarrower</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/ConceptApiProvider.html#getNarrower">ConceptApiProvider - getNarrower</a></li><li><a href="https://gbv.github.io/cocoda-sdk/SkosmosApiProvider.html#getNarrower">SkosmosApiProvider - getNarrower</a></li></ul><h4 id="registry.getancestors"><code>registry.getAncestors</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/ConceptApiProvider.html#getAncestors">ConceptApiProvider - getAncestors</a></li><li><a href="https://gbv.github.io/cocoda-sdk/SkosmosApiProvider.html#getAncestors">SkosmosApiProvider - getAncestors</a></li></ul><h4 id="registry.search"><code>registry.search</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/ConceptApiProvider.html#search">ConceptApiProvider - search</a></li><li><a href="https://gbv.github.io/cocoda-sdk/SkosmosApiProvider.html#search">SkosmosApiProvider - search</a></li></ul><h4 id="registry.suggest"><code>registry.suggest</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/ConceptApiProvider.html#suggest">ConceptApiProvider - suggest</a></li><li><a href="https://gbv.github.io/cocoda-sdk/SkosmosApiProvider.html#suggest">SkosmosApiProvider - suggest</a></li></ul><h3 id="registry-methods---concordances">Registry Methods - Concordances</h3><h4 id="registry.getconcordances"><code>registry.getConcordances</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#getConcordances">MappingsApiProvider - getConcordances</a></li></ul><h4 id="registry.postconcordance"><code>registry.postConcordance</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#postConcordance">MappingsApiProvider - postConcordance</a></li></ul><h4 id="registry.putconcordance"><code>registry.putConcordance</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#putConcordance">MappingsApiProvider - putConcordance</a></li></ul><h4 id="registry.patchconcordance"><code>registry.patchConcordance</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#patchConcordance">MappingsApiProvider - patchConcordance</a></li></ul><h4 id="registry.deleteconcordance"><code>registry.deleteConcordance</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#deleteConcordance">MappingsApiProvider - deleteConcordance</a></li></ul><h3 id="registry-methods---mappings">Registry Methods - Mappings</h3><h4 id="registry.getmappings"><code>registry.getMappings</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#getMappings">MappingsApiProvider - getMappings</a></li><li><a href="https://gbv.github.io/cocoda-sdk/LocalMappingsProvider.html#getMappings">LocalMappingsProvider - getMappings</a></li><li><a href="https://gbv.github.io/cocoda-sdk/ReconciliationApiProvider.html#getMappings">ReconciliationApiProvider - getMappings</a></li><li><a href="https://gbv.github.io/cocoda-sdk/LabelSearchSuggestionProvider.html#getMappings">LabelSearchSuggestionProvider - getMappings</a></li><li><a href="https://gbv.github.io/cocoda-sdk/OccurrencesApiProvider.html#getMappings">OccurrencesApiProvider - getMappings</a></li></ul><h4 id="registry.getmapping"><code>registry.getMapping</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#getMapping">MappingsApiProvider - getMapping</a></li><li><a href="https://gbv.github.io/cocoda-sdk/LocalMappingsProvider.html#getMapping">LocalMappingsProvider - getMapping</a></li></ul><h4 id="registry.postmapping"><code>registry.postMapping</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#postMapping">MappingsApiProvider - postMapping</a></li><li><a href="https://gbv.github.io/cocoda-sdk/LocalMappingsProvider.html#postMapping">LocalMappingsProvider - postMapping</a></li></ul><h4 id="registry.postmappings"><code>registry.postMappings</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/BaseProvider.html#postMappings">BaseProvider - postMappings</a></li></ul><h4 id="registry.putmapping"><code>registry.putMapping</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#putMapping">MappingsApiProvider - putMapping</a></li><li><a href="https://gbv.github.io/cocoda-sdk/LocalMappingsProvider.html#putMapping">LocalMappingsProvider - putMapping</a></li></ul><h4 id="registry.patchmapping"><code>registry.patchMapping</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#patchMapping">MappingsApiProvider - patchMapping</a></li><li><a href="https://gbv.github.io/cocoda-sdk/LocalMappingsProvider.html#patchMapping">LocalMappingsProvider - patchMapping</a></li></ul><h4 id="registry.deletemapping"><code>registry.deleteMapping</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#deleteMapping">MappingsApiProvider - deleteMapping</a></li><li><a href="https://gbv.github.io/cocoda-sdk/LocalMappingsProvider.html#deleteMapping">LocalMappingsProvider - deleteMapping</a></li></ul><h4 id="registry.deletemappings"><code>registry.deleteMappings</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/BaseProvider.html#deleteMappings">BaseProvider - deleteMappings</a></li></ul><h3 id="registry-methods---annotations">Registry Methods - Annotations</h3><h4 id="registry.getannotations"><code>registry.getAnnotations</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#getAnnotations">MappingsApiProvider - getAnnotations</a></li></ul><h4 id="registry.postannotation"><code>registry.postAnnotation</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#postAnnotation">MappingsApiProvider - postAnnotation</a></li></ul><h4 id="registry.putannotation"><code>registry.putAnnotation</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#putAnnotation">MappingsApiProvider - putAnnotation</a></li></ul><h4 id="registry.patchannotation"><code>registry.patchAnnotation</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#patchAnnotation">MappingsApiProvider - patchAnnotation</a></li></ul><h4 id="registry.deleteannotation"><code>registry.deleteAnnotation</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/MappingsApiProvider.html#deleteAnnotation">MappingsApiProvider - deleteAnnotation</a></li></ul><h3 id="registry-methods---various">Registry Methods - Various</h3><h4 id="registry.getoccurrences"><code>registry.getOccurrences</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/OccurrencesApiProvider.html#getOccurrences">OccurrencesApiProvider - getOccurrences</a></li></ul><h4 id="registry.gettypes"><code>registry.getTypes</code></h4><ul><li><a href="https://gbv.github.io/cocoda-sdk/ConceptApiProvider.html#getTypes">ConceptApiProvider - getTypes</a></li><li><a href="https://gbv.github.io/cocoda-sdk/SkosmosApiProvider.html#getTypes">SkosmosApiProvider - getTypes</a></li></ul><h2 id="errors">Errors</h2><p>cocoda-sdk defines some custom errors.</p><pre class="prettyprint source lang-js"><code>const { errors } = require(&quot;cocoda-sdk&quot;) // CommonJS
import { errors } from &quot;cocoda-sdk&quot;
</code></pre><p>The following errors are defined:</p><ul><li><code>CDKError</code> - generic error</li><li><code>MethodNotImplementedError</code> - called method is available, but not implemented by the provider</li><li><code>InvalidOrMissingParameterError</code> - a parameter is missing or invalid</li><li><code>BackendError</code> - a response was received, but there was a problem on the backend</li><li><code>BackendUnavailableError</code> - no response was received, but the client's internet connection seems to be working</li><li><code>NetworkError</code> - there was a problem with the network</li><li><code>InvalidRequestError</code> - the request was invalid</li><li><code>MissingApiUrlError</code> - the API URL necessary to make this request is not defined on the registry</li></ul><p>For details about the errors, refer to the <a href="https://gbv.github.io/cocoda-sdk/index.html">documentation</a>.</p><h2 id="maintainers">Maintainers</h2><ul><li><a href="https://github.com/stefandesu">@stefandesu</a></li><li><a href="https://github.com/nichtich">@nichtich</a></li></ul><h2 id="publish">Publish</h2><p>Please work on the <code>dev</code> branch during development (or better yet, develop in a feature branch and merge into <code>dev</code> when ready).</p><p>When a new release is ready (i.e. the features are finished, merged into <code>dev</code>, and all tests succeed), run the included release script (replace &quot;patch&quot; with &quot;minor&quot; or &quot;major&quot; if necessary):</p><pre class="prettyprint source lang-bash"><code>npm run release:patch
</code></pre><p>This will:</p><ul><li>Run tests and build to make sure everything works</li><li>Switch to <code>dev</code></li><li>Make sure <code>dev</code> is up-to-date</li><li>Run <code>npm version patch</code> (or &quot;minor&quot;/&quot;major&quot;)</li><li>Push changes to <code>dev</code></li><li>Switch to <code>master</code></li><li>Merge changes from <code>dev</code></li><li>Push <code>master</code> with tags</li><li>Switch back to <code>dev</code></li></ul><p>After running this, GitHub Actions will automatically publish the new version to npm. It will also create a new GitHub Release draft. Please edit and publish the release manually.</p><h2 id="contribute">Contribute</h2><p>PRs accepted.</p><p>Small note: If editing the README, please conform to the <a href="https://github.com/RichardLitt/standard-readme">standard-readme</a> specification.</p><h2 id="license">License</h2><p>MIT Copyright (c) 2021 Verbundzentrale des GBV (VZG)</p></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><a href="/" class="sidebar-title sidebar-title-anchor">Home</a><div class="mobile-nav-links"></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="2ON8ikQMylqMPb1Uyrg7F"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-cocoda-sdk.html">cocoda-sdk</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="jZE9WK--B7S9Znro2kwqz"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="BackendError.html">BackendError</a></div><div class="sidebar-section-children"><a href="BackendUnavailableError.html">BackendUnavailableError</a></div><div class="sidebar-section-children"><a href="BaseProvider.html">BaseProvider</a></div><div class="sidebar-section-children"><a href="CDKError.html">CDKError</a></div><div class="sidebar-section-children"><a href="CocodaSDK.html">CocodaSDK</a></div><div class="sidebar-section-children"><a href="ConceptApiProvider.html">ConceptApiProvider</a></div><div class="sidebar-section-children"><a href="InvalidOrMissingParameterError.html">InvalidOrMissingParameterError</a></div><div class="sidebar-section-children"><a href="InvalidProviderError.html">InvalidProviderError</a></div><div class="sidebar-section-children"><a href="InvalidRequestError.html">InvalidRequestError</a></div><div class="sidebar-section-children"><a href="LabelSearchSuggestionProvider.html">LabelSearchSuggestionProvider</a></div><div class="sidebar-section-children"><a href="LocApiProvider.html">LocApiProvider</a></div><div class="sidebar-section-children"><a href="LocalMappingsProvider.html">LocalMappingsProvider</a></div><div class="sidebar-section-children"><a href="MappingsApiProvider.html">MappingsApiProvider</a></div><div class="sidebar-section-children"><a href="MethodNotImplementedError.html">MethodNotImplementedError</a></div><div class="sidebar-section-children"><a href="MissingApiUrlError.html">MissingApiUrlError</a></div><div class="sidebar-section-children"><a href="MyCoReProvider.html">MyCoReProvider</a></div><div class="sidebar-section-children"><a href="NetworkError.html">NetworkError</a></div><div class="sidebar-section-children"><a href="OccurrencesApiProvider.html">OccurrencesApiProvider</a></div><div class="sidebar-section-children"><a href="ReconciliationApiProvider.html">ReconciliationApiProvider</a></div><div class="sidebar-section-children"><a href="SkohubProvider.html">SkohubProvider</a></div><div class="sidebar-section-children"><a href="SkosmosApiProvider.html">SkosmosApiProvider</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>